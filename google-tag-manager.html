<link rel="import" href="../polymer/polymer-element.html">

<dom-module id="google-tag-manager">
  <template>
    <style>
    </style>
  </template>

  <script>
    class GoogleTagManager extends Polymer.Element {
      static get is() { return 'google-tag-manager'; }
      static get properties() {
        return {
        	json: {
        		type: Object
        	},
        	gtmId: {
        		type: String
            }
        };
      }
      constructor() {
    	  super();
      }
      ready(){
    	  if (typeof(this.json) != "undefined"){
    		  window["dataLayer"]=window["dataLayer"]||[];
    		  window.dataLayer.push(this.json);
    	  }
    	  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    	    	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    	    	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    	    	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    	    	})(window,document,'script','dataLayer',this.gtmId);
      }
    }
    
    window.customElements.define(GoogleTagManager.is, GoogleTagManager);
  </script>
</dom-module>
